@model VentaSnacks.Models.Linea
@{
    <link href="~/Content/StyleP.css" rel="stylesheet" />
    ViewBag.Title = "Crear";
    Layout = "~/Views/Shared/_Layout.cshtml";
    <link href="~/Content/style.css" rel="stylesheet" />
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
}

@if ((VentaSnacks.Models.User)Session["usuario."] == null)
{
    Response.Redirect("~/Users/Login");
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <h2>Seleccione el Producto</h2>
    <div class="row">
        @foreach (var item in ViewBag.listaProductos)
        {
            <div class="card border-primary mb-3" style="max-width: 11rem;margin:10px">
                <div class="card-header"><h4>@item.nombre</h4></div>
                <div class="card-body" style="text-align:center; ">
                    <h5>Precio:</h5>
                    <br />
                    <h7>@item.costo</h7>
                    @*Obtiene la imagen de la base de datos*@
                    @*{
                            string imageBase64 = Convert.ToBase64String(item.imagen);
                            string imageSrc = string.Format("data:image/gif;base64,{0}", imageBase64);
                        }
                        <div style="height:130px;text-align:center;padding:10px;">
                            <img src="@imageSrc" alt="@item.imagen" width="100" />
                        </div>*@
                    @*Fin de la obtencion de la imagen de la base de datos*@
                    <br />
                    <div class="card-footer">
                        <h6>Seleccionar</h6>
                        @Html.RadioButtonFor(x => x.idArticulo, Model.idArticulo = @item.idArticulo)
                    </div>
                </div>
            </div>
        }
    </div>

    <hr />

    <h2>Seleccione la cantidad:</h2>



    <div class="form-group">

        <div style="width:20rem">
            @Html.EditorFor(model => model.cantidad, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.cantidad, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group">

        <div>
            @Html.HiddenFor(model => model.total, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.total, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Agregar" class="btn btn-default" />
        </div>
    </div>
}

<div>
    @Html.ActionLink("Ir a Factura", "Create", "Facturas")
</div>

